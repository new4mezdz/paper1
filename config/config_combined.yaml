# === Combined Config: Fountain layer + Stego layer (IDR + DCT DM-QIM) ===
paths:
  # 重新嵌入时：指向“原始源视频”
  video_glob: "D:/paper/data/samples/1.mp4"
  output_dir: "D:/paper/outputs"
  message_file: "D:/paper/data/samples/msg.txt"
  session_id_hex: "5A1B2C3D"

encoder:
  codec: "libx264"
  preset: "medium"
  crf: 22            # 想更鲁棒可改小些（如 20 或 18）
  fps_hint: 30
  gop_seconds: 2
  scenecut: 0
  open_gop: 0
  pix_fmt: "yuv420p"
  drop_audio: true

dm_qim:
  channel: "Y"
  block: 8
  delta: 10.0        # 为确保嵌/解码一致、抗量化更强
  coeff_pos:
    - [2, 3]
    - [3, 2]
    - [3, 3]
  rng_seed: 20250914
  max_bits_per_idr: 8000
  skip_low_texture: false   # 关键：关闭按方差跳过，避免两端块选择失配
  var_thresh: 20.0

fountain:
  scheme: "LT"
  block_bytes: 256
  K: null
  epsilon: 0.15
  rsd_c: 0.1
  rsd_delta: 0.5
  index_bytes: 2
  crc16: true

dev:
  verbose: true
  save_debug_idr_png: false
